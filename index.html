<!-- index.html -->
<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <title>Hermosillo – Sim Automation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Estilos base y temas -->
    <link rel="stylesheet" href="styles/base.css" />
    <link rel="stylesheet" href="styles/theme-light.css" id="theme-light" />
    <link
      rel="stylesheet"
      href="styles/theme-dark.css"
      id="theme-dark"
      disabled
    />
  </head>

  <body>
    <div class="app">
      <!-- Encabezado de la aplicación -->
      <header class="app-header">
        <div class="app-header-row">
          <!-- Branding -->
          <div class="app-header-left">
            <div class="brand-row">
              <span class="brand-main">Hermosillo</span>
              <span class="brand-separator">-</span>
              <span class="brand-sub">Sim Automation</span>
            </div>
            <!-- Título configurable -->
            <h1 class="app-title">Twinmotion Datasmith Pipeline (Web)</h1>
          </div>

          <!-- Botón de cambio de tema -->
          <div class="app-header-right">
            <button
              type="button"
              id="btnThemeToggle"
              class="btn-secondary theme-toggle"
              aria-label="Cambiar tema"
            >
              DARK
            </button>
          </div>
        </div>
      </header>

      <main class="app-main">
        <!-- PANEL 01 · SORT & PURGE -->
        <section class="panel panel-sort">
          <div class="panel-header">
            <div>
              <div class="panel-tag">S O R T &amp; P U R G E</div>
            </div>
          </div>

          <div class="panel-body">
            <!-- Campo de selección de archivo -->
            <div class="field-row">
              <label for="fileSort">ORIGINAL</label>
              <div class="field-inline">
                <input
                  type="file"
                  id="fileSort"
                  accept=".udatasmith"
                  aria-label="Seleccionar archivo ORIGINAL para Sort &amp; Purge"
                  multiple
                />
                <span class="field-filename" id="fileSortName">
                  NINGUN ARCHIVO SELECCIONADO
                </span>
              </div>
            </div>

            <!-- Botón de ejecución -->
            <div class="panel-footer">
              <button
                type="button"
                id="btnRunSort"
                class="btn-primary"
                aria-label="Ejecutar Sort &amp; Purge"
              >
                IR
              </button>
            </div>
          </div>
        </section>

        <!-- PANEL 02 · REPLACE & MERGE (PIPELINE) -->
        <section class="panel panel-pipeline">
          <div class="panel-header">
            <div>
              <div class="panel-tag">R E P L A C E &amp; M E R G E</div>
            </div>

            <!-- Botón + para añadir pares -->
            <div class="panel-actions">
              <button
                type="button"
                id="btnAddJob"
                class="btn-icon"
                title="Agregar par ORIGINAL + NUEVO"
                aria-label="Agregar par"
              >
                +
              </button>
            </div>
          </div>

          <div class="panel-body">
            <!-- Contenedor de todos los pares -->
            <div class="pipeline-jobs" id="pipelineJobs">
              <!-- Job base que se clona dinámicamente -->
              <div class="pipeline-job pipeline-job-base">
                <div class="job-header">
                  <span class="job-title">Par 01</span>
                  <button
                    type="button"
                    class="btn-icon btn-remove-job"
                    title="Quitar par"
                    aria-label="Quitar par"
                  >
                    ×
                  </button>
                </div>

                <div class="job-fields">
                  <!-- Archivo original -->
                  <div class="field-row">
                    <label>ORIGINAL (SORT &amp; PURGE)</label>
                    <div class="field-inline">
                      <input
                        type="file"
                        class="file-original"
                        accept=".udatasmith"
                        aria-label="Seleccionar ORIGINAL para Replace &amp; Merge"
                      />
                      <span class="field-filename filename-original">
                        NINGUN ARCHIVO SELECCIONADO
                      </span>
                    </div>
                  </div>

                  <!-- Archivo nuevo -->
                  <div class="field-row">
                    <label>NUEVO PROYECTO</label>
                    <div class="field-inline">
                      <input
                        type="file"
                        class="file-new"
                        accept=".udatasmith"
                        aria-label="Seleccionar NUEVO PROYECTO"
                      />
                      <span class="field-filename filename-new">
                        NINGUN ARCHIVO SELECCIONADO
                      </span>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Fin job base -->
            </div>

            <!-- Botón de ejecución -->
            <div class="panel-footer">
              <button
                type="button"
                id="btnRunPipeline"
                class="btn-primary"
                aria-label="Ejecutar Replace &amp; Merge"
              >
                IR
              </button>
            </div>
          </div>
        </section>

        <!-- PANEL 03 · LOG -->
        <section class="panel panel-log">
          <div class="panel-header">
            <div>
              <div class="panel-tag">L O G</div>
            </div>
          </div>

          <div class="panel-body">
            <!-- Contenedor raíz del log (JS construye tabs + vistas dentro) -->
            <div id="log" class="log-container"></div>
          </div>
        </section>

        <!-- BOTÓN LIMPIAR ESTADO -->
        <div class="app-footer">
          <button
            type="button"
            id="btnClear"
            class="btn-primary btn-clear"
            aria-label="Limpiar estado y recargar"
          >
            LIMPIAR
          </button>
        </div>
      </main>
    </div>

    <!-- LIBRERÍAS Y APP JS -->
    <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>

    <!-- Configuración -->
    <script src="js/config.js"></script>

    <!-- Módulo de log -->
    <script src="js/log.js"></script>

    <!-- Backend: procesamiento y merge -->
    <script src="js/sortPurge.js"></script>
    <script src="js/mergePipeline.js"></script>

    <!-- UI principal -->
    <script src="js/app.js"></script>
  </body>
</html>
